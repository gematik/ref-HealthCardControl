<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="893px" preserveAspectRatio="none" style="width:918px;height:893px;" version="1.1" viewBox="0 0 918 893" width="918px" zoomAndPan="magnify"><defs><filter height="300%" id="f1it6ps2cxuhgo" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster de.gematik.ti.healthcard.control--><polygon fill="#FFFFFF" filter="url(#f1it6ps2cxuhgo)" points="22,24,251,24,258,47.6094,896,47.6094,896,881,22,881,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="258" y1="47.6094" y2="47.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="223" x="26" y="40.5332">de.gematik.ti.healthcard.control</text><!--cluster events--><polygon fill="#FFFFFF" filter="url(#f1it6ps2cxuhgo)" points="613,68,668,68,675,91.6094,872,91.6094,872,243,613,243,613,68" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="613" x2="675" y1="91.6094" y2="91.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="617" y="84.5332">events</text><!--cluster healthcard--><polygon fill="#FFFFFF" filter="url(#f1it6ps2cxuhgo)" points="637,112,718,112,725,135.6094,848,135.6094,848,219,637,219,637,112" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="637" x2="725" y1="135.6094" y2="135.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="641" y="128.5332">healthcard</text><!--class CardDetector--><rect fill="#FEFECE" filter="url(#f1it6ps2cxuhgo)" height="366.2266" id="CardDetector" style="stroke: #A80036; stroke-width: 1.5;" width="260" x="198" y="308"/><ellipse cx="287.25" cy="324" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M289.25,320.5 Q289.4531,320 289.6875,319.75 Q289.9219,319.5 290.1875,319.5 Q290.6563,319.5 290.9531,319.7813 Q291.25,320.0625 291.25,320.7188 L291.25,322.2813 Q291.25,322.9375 290.9688,323.2188 Q290.6875,323.5 290.25,323.5 Q289.8594,323.5 289.6094,323.3281 Q289.3594,323.1563 289.25,322.7031 Q289.2031,322.3906 289.0313,322.2188 Q288.7188,321.8906 288.1563,321.7031 Q287.5938,321.5 287.0313,321.5 Q286.3281,321.5 285.7344,321.7813 Q285.1563,322.0625 284.7031,322.6875 Q284.25,323.3125 284.25,324.1719 L284.25,325.0938 Q284.25,326.125 285.0938,326.8125 Q285.9375,327.5 287.4375,327.5 Q288.3281,327.5 288.9531,327.2969 Q289.3125,327.1875 289.7188,326.8281 Q289.9844,326.625 290.125,326.5625 Q290.2656,326.5 290.4375,326.5 Q290.7656,326.5 291,326.7656 Q291.25,327.0156 291.25,327.375 Q291.25,327.7188 290.9063,328.125 Q290.4063,328.7188 289.6094,329.0469 Q288.5625,329.5 287.2813,329.5 Q285.7813,329.5 284.5781,328.9063 Q283.6094,328.4375 282.9219,327.4219 Q282.25,326.4063 282.25,325.2031 L282.25,324.1094 Q282.25,322.8594 282.8438,321.7656 Q283.4531,320.6719 284.5,320.0938 Q285.5625,319.5 286.75,319.5 Q287.4688,319.5 288.0938,319.75 Q288.7188,320 289.25,320.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="73" x="307.75" y="328.9102">CardDetector</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="199" x2="457" y1="340" y2="340"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="349.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="65" x="218" y="355.4189">LOG : Logger</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="363.2539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="59" x="218" y="369.2549">TAG : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="377.0898"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="135" x="218" y="383.0908">RECEIVE_BUFFER_SIZE : int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="390.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="114" x="218" y="396.9268">instance : CardDetector</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="404.7617"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="234" x="218" y="410.7627">healthCardMap : Map&lt;ICardReader, IHealthCard&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="199" x2="457" y1="417.1797" y2="417.1797"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="426.5977"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="218" y="432.5986">CardDetector()</text><ellipse cx="209" cy="443.4336" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="64" x="218" y="446.4346">getInstance()</text><ellipse cx="209" cy="457.2695" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="75" x="218" y="460.2705">startDetection()</text><ellipse cx="209" cy="471.1055" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="74" x="218" y="474.1064">stopDetection()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="481.9414"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="218" y="487.9424">register()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="495.7773"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="218" y="501.7783">unregister()</text><ellipse cx="209" cy="512.6133" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="218" y="515.6143">handleCardPresentEvents()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="523.4492"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="209" x="218" y="529.4502">createHealthCardWithTypeAndSendEvent()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="537.2852"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="218" y="543.2861">extractCardType()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="551.1211"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="218" y="557.1221">sendEvent()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="564.957"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="218" y="570.958">createPresentEventForHealthCardType()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="578.793"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="218" y="584.7939">getHealthCardTypeSmcb()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="592.6289"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="218" y="598.6299">getHealthCardTypeHba()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="606.4648"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="218" y="612.4658">getHealthCardTypeForEgk()</text><ellipse cx="209" cy="623.3008" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="218" y="626.3018">handleCardAbsentEvents()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="634.1367"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="218" y="640.1377">sendCardAbsentEvent()</text><ellipse cx="209" cy="650.9727" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="218" y="653.9736">handleCardReaderDisconnectedEvents()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="206" y="661.8086"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="218" y="667.8096">createAbsentEventForHealthCardType()</text><!--class CARD_TYPE--><rect fill="#FEFECE" filter="url(#f1it6ps2cxuhgo)" height="103.3438" id="CARD_TYPE" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="179.5" y="748"/><ellipse cx="194.5" cy="764" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M193,765 L193,767 L197,767 L197,766 L197,765.5156 L197.625,765 L198,765 L198.375,765 L199,765.5156 L199,766 L199,769 L191,769 L190.5156,769 L190,768.375 L190,768 L190,767.625 L190.5156,767 L191,767 L191,767 L191,761 L191,761 L190.5156,761 L190,760.375 L190,760 L190,759.625 L190.5156,759 L191,759 L199,759 L199,762 L199,762.4844 L198.375,763 L198,763 L197.625,763 L197,762.4844 L197,762 L197,761 L193,761 L193,763 L194,763 L194,762.5156 L194,762.5156 L194.625,762 L195,762 L195.375,762 L196,762.5156 L196,763 L196,765 L196,765.4844 L195.375,766 L195.375,766 L195,766 L194.625,766 L194,765.4844 L194,765.4844 L194,765 L193,765 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="208.5" y="768.9102">CARD_TYPE</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="180.5" x2="281.5" y1="780" y2="780"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="185.5" y="795.4189">EGK</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="185.5" y="809.2549">HBA</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="185.5" y="823.0908">SMCB</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="185.5" y="836.9268">UNKNOWN</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="180.5" x2="281.5" y1="843.3438" y2="843.3438"/><!--class CardGenerationExtractor--><rect fill="#FEFECE" filter="url(#f1it6ps2cxuhgo)" height="131.0156" id="CardGenerationExtractor" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="317.5" y="734"/><ellipse cx="332.5" cy="750" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M334.5,746.5 Q334.7031,746 334.9375,745.75 Q335.1719,745.5 335.4375,745.5 Q335.9063,745.5 336.2031,745.7813 Q336.5,746.0625 336.5,746.7188 L336.5,748.2813 Q336.5,748.9375 336.2188,749.2188 Q335.9375,749.5 335.5,749.5 Q335.1094,749.5 334.8594,749.3281 Q334.6094,749.1563 334.5,748.7031 Q334.4531,748.3906 334.2813,748.2188 Q333.9688,747.8906 333.4063,747.7031 Q332.8438,747.5 332.2813,747.5 Q331.5781,747.5 330.9844,747.7813 Q330.4063,748.0625 329.9531,748.6875 Q329.5,749.3125 329.5,750.1719 L329.5,751.0938 Q329.5,752.125 330.3438,752.8125 Q331.1875,753.5 332.6875,753.5 Q333.5781,753.5 334.2031,753.2969 Q334.5625,753.1875 334.9688,752.8281 Q335.2344,752.625 335.375,752.5625 Q335.5156,752.5 335.6875,752.5 Q336.0156,752.5 336.25,752.7656 Q336.5,753.0156 336.5,753.375 Q336.5,753.7188 336.1563,754.125 Q335.6563,754.7188 334.8594,755.0469 Q333.8125,755.5 332.5313,755.5 Q331.0313,755.5 329.8281,754.9063 Q328.8594,754.4375 328.1719,753.4219 Q327.5,752.4063 327.5,751.2031 L327.5,750.1094 Q327.5,748.8594 328.0938,747.7656 Q328.7031,746.6719 329.75,746.0938 Q330.8125,745.5 332,745.5 Q332.7188,745.5 333.3438,745.75 Q333.9688,746 334.5,746.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="346.5" y="754.9102">CardGenerationExtractor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="318.5" x2="483.5" y1="766" y2="766"/><ellipse cx="328.5" cy="778.418" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="69" x="337.5" y="781.4189">RADIX_16 : int</text><ellipse cx="328.5" cy="792.2539" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="134" x="337.5" y="795.2549">MIN_VERSION_LENGTH : int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="318.5" x2="483.5" y1="801.6719" y2="801.6719"/><ellipse cx="328.5" cy="814.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="337.5" y="817.0908">getCardGeneration()</text><ellipse cx="328.5" cy="827.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="337.5" y="830.9268">getCardGeneration()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="325.5" y="838.7617"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="337.5" y="844.7627">convertToInt()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="325.5" y="852.5977"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="337.5" y="858.5986">check()</text><!--class HealthCardControl--><rect fill="#FEFECE" filter="url(#f1it6ps2cxuhgo)" height="144.8516" id="HealthCardControl" style="stroke: #A80036; stroke-width: 1.5;" width="163" x="433.5" y="103"/><ellipse cx="461.1" cy="119" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M463.1,115.5 Q463.3031,115 463.5375,114.75 Q463.7719,114.5 464.0375,114.5 Q464.5063,114.5 464.8031,114.7813 Q465.1,115.0625 465.1,115.7188 L465.1,117.2813 Q465.1,117.9375 464.8188,118.2188 Q464.5375,118.5 464.1,118.5 Q463.7094,118.5 463.4594,118.3281 Q463.2094,118.1563 463.1,117.7031 Q463.0531,117.3906 462.8813,117.2188 Q462.5688,116.8906 462.0063,116.7031 Q461.4438,116.5 460.8813,116.5 Q460.1781,116.5 459.5844,116.7813 Q459.0063,117.0625 458.5531,117.6875 Q458.1,118.3125 458.1,119.1719 L458.1,120.0938 Q458.1,121.125 458.9438,121.8125 Q459.7875,122.5 461.2875,122.5 Q462.1781,122.5 462.8031,122.2969 Q463.1625,122.1875 463.5688,121.8281 Q463.8344,121.625 463.975,121.5625 Q464.1156,121.5 464.2875,121.5 Q464.6156,121.5 464.85,121.7656 Q465.1,122.0156 465.1,122.375 Q465.1,122.7188 464.7563,123.125 Q464.2563,123.7188 463.4594,124.0469 Q462.4125,124.5 461.1313,124.5 Q459.6313,124.5 458.4281,123.9063 Q457.4594,123.4375 456.7719,122.4219 Q456.1,121.4063 456.1,120.2031 L456.1,119.1094 Q456.1,117.8594 456.6938,116.7656 Q457.3031,115.6719 458.35,115.0938 Q459.4125,114.5 460.6,114.5 Q461.3188,114.5 461.9438,114.75 Q462.5688,115 463.1,115.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="477.9" y="123.9102">HealthCardControl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="434.5" x2="595.5" y1="135" y2="135"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="441.5" y="144.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="65" x="453.5" y="150.4189">LOG : Logger</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="441.5" y="158.2539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="59" x="453.5" y="164.2549">TAG : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="441.5" y="172.0898"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="137" x="453.5" y="178.0908">instance : HealthCardControl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="434.5" x2="595.5" y1="184.5078" y2="184.5078"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="441.5" y="193.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="453.5" y="199.9268">HealthCardControl()</text><ellipse cx="444.5" cy="210.7617" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="64" x="453.5" y="213.7627">getInstance()</text><ellipse cx="444.5" cy="224.5977" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="30" x="453.5" y="227.5986">start()</text><ellipse cx="444.5" cy="238.4336" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="29" x="453.5" y="241.4346">stop()</text><!--class TrustedChannelPaceKeyRequestHandler--><rect fill="#FEFECE" filter="url(#f1it6ps2cxuhgo)" height="186.3594" id="TrustedChannelPaceKeyRequestHandler" style="stroke: #A80036; stroke-width: 1.5;" width="272" x="493" y="398"/><ellipse cx="513.4" cy="414" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M515.4,410.5 Q515.6031,410 515.8375,409.75 Q516.0719,409.5 516.3375,409.5 Q516.8063,409.5 517.1031,409.7813 Q517.4,410.0625 517.4,410.7188 L517.4,412.2813 Q517.4,412.9375 517.1188,413.2188 Q516.8375,413.5 516.4,413.5 Q516.0094,413.5 515.7594,413.3281 Q515.5094,413.1563 515.4,412.7031 Q515.3531,412.3906 515.1813,412.2188 Q514.8688,411.8906 514.3063,411.7031 Q513.7438,411.5 513.1813,411.5 Q512.4781,411.5 511.8844,411.7813 Q511.3063,412.0625 510.8531,412.6875 Q510.4,413.3125 510.4,414.1719 L510.4,415.0938 Q510.4,416.125 511.2438,416.8125 Q512.0875,417.5 513.5875,417.5 Q514.4781,417.5 515.1031,417.2969 Q515.4625,417.1875 515.8688,416.8281 Q516.1344,416.625 516.275,416.5625 Q516.4156,416.5 516.5875,416.5 Q516.9156,416.5 517.15,416.7656 Q517.4,417.0156 517.4,417.375 Q517.4,417.7188 517.0563,418.125 Q516.5563,418.7188 515.7594,419.0469 Q514.7125,419.5 513.4313,419.5 Q511.9313,419.5 510.7281,418.9063 Q509.7594,418.4375 509.0719,417.4219 Q508.4,416.4063 508.4,415.2031 L508.4,414.1094 Q508.4,412.8594 508.9938,411.7656 Q509.6031,410.6719 510.65,410.0938 Q511.7125,409.5 512.9,409.5 Q513.6188,409.5 514.2438,409.75 Q514.8688,410 515.4,410.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="228" x="528.6" y="418.9102">TrustedChannelPaceKeyRequestHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="494" x2="764" y1="430" y2="430"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="501" y="439.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="65" x="513" y="445.4189">LOG : Logger</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="501" y="453.2539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="59" x="513" y="459.2549">TAG : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="501" y="467.0898"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="246" x="513" y="473.0908">instance : TrustedChannelPaceKeyRequestHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="494" x2="764" y1="479.5078" y2="479.5078"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="501" y="488.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="513" y="494.9268">TrustedChannelPaceKeyRequestHandler()</text><ellipse cx="504" cy="505.7617" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="64" x="513" y="508.7627">getInstance()</text><ellipse cx="504" cy="519.5977" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="71" x="513" y="522.5986">startHandling()</text><ellipse cx="504" cy="533.4336" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="70" x="513" y="536.4346">stopHandling()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="501" y="544.2695"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="513" y="550.2705">register()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="501" y="558.1055"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="513" y="564.1064">unregister()</text><ellipse cx="504" cy="574.9414" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="513" y="577.9424">handleRequestPaceKeyEvent()</text><!--class de.gematik.ti.healthcard.control.security--><rect fill="#FEFECE" filter="url(#f1it6ps2cxuhgo)" height="48" id="de.gematik.ti.healthcard.control.security" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="592" y="775.5"/><ellipse cx="607" cy="791.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M609,788 Q609.2031,787.5 609.4375,787.25 Q609.6719,787 609.9375,787 Q610.4063,787 610.7031,787.2813 Q611,787.5625 611,788.2188 L611,789.7813 Q611,790.4375 610.7188,790.7188 Q610.4375,791 610,791 Q609.6094,791 609.3594,790.8281 Q609.1094,790.6563 609,790.2031 Q608.9531,789.8906 608.7813,789.7188 Q608.4688,789.3906 607.9063,789.2031 Q607.3438,789 606.7813,789 Q606.0781,789 605.4844,789.2813 Q604.9063,789.5625 604.4531,790.1875 Q604,790.8125 604,791.6719 L604,792.5938 Q604,793.625 604.8438,794.3125 Q605.6875,795 607.1875,795 Q608.0781,795 608.7031,794.7969 Q609.0625,794.6875 609.4688,794.3281 Q609.7344,794.125 609.875,794.0625 Q610.0156,794 610.1875,794 Q610.5156,794 610.75,794.2656 Q611,794.5156 611,794.875 Q611,795.2188 610.6563,795.625 Q610.1563,796.2188 609.3594,796.5469 Q608.3125,797 607.0313,797 Q605.5313,797 604.3281,796.4063 Q603.3594,795.9375 602.6719,794.9219 Q602,793.9063 602,792.7031 L602,791.6094 Q602,790.3594 602.5938,789.2656 Q603.2031,788.1719 604.25,787.5938 Q605.3125,787 606.5,787 Q607.2188,787 607.8438,787.25 Q608.4688,787.5 609,788 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="621" y="796.4102">security</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="593" x2="665" y1="807.5" y2="807.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="593" x2="665" y1="815.5" y2="815.5"/><polygon fill="#FFFFFF" filter="url(#f1it6ps2cxuhgo)" points="764,148,818,148,825,171.6094,832,171.6094,832,203.2188,764,203.2188,764,148" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="764" x2="825" y1="171.6094" y2="171.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="768" y="164.5332">absent</text><polygon fill="#FFFFFF" filter="url(#f1it6ps2cxuhgo)" points="653.5,148,714.5,148,721.5,171.6094,728.5,171.6094,728.5,203.2188,653.5,203.2188,653.5,148" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="653.5" x2="721.5" y1="171.6094" y2="171.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="657.5" y="164.5332">present</text><polygon fill="#FFFFFF" filter="url(#f1it6ps2cxuhgo)" points="322,148,384,148,391,171.6094,398,171.6094,398,203.2188,322,203.2188,322,148" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="322" x2="391" y1="171.6094" y2="171.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="326" y="164.5332">security</text><polygon fill="#FFFFFF" filter="url(#f1it6ps2cxuhgo)" points="243,148,273,148,280,171.6094,287,171.6094,287,203.2188,243,203.2188,243,148" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="243" x2="280" y1="171.6094" y2="171.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="247" y="164.5332">c2c</text><polygon fill="#FFFFFF" filter="url(#f1it6ps2cxuhgo)" points="152.5,148,193.5,148,200.5,171.6094,207.5,171.6094,207.5,203.2188,152.5,203.2188,152.5,148" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="152.5" x2="200.5" y1="171.6094" y2="171.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="156.5" y="164.5332">nfdm</text><polygon fill="#FFFFFF" filter="url(#f1it6ps2cxuhgo)" points="38.5,148,103.5,148,110.5,171.6094,117.5,171.6094,117.5,203.2188,38.5,203.2188,38.5,148" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="38.5" x2="110.5" y1="171.6094" y2="171.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="42.5" y="164.5332">protocol</text><!--link CardDetector to CARD_TYPE--><path d="M265.774,688.62 C258.944,710.204 252.509,730.537 247.076,747.704 " fill="none" id="CardDetector-CARD_TYPE" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="267.8997" cy="681.904" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="265.4853" x2="270.314" y1="689.531" y2="674.277"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="260.2727" x2="275.5267" y1="679.4897" y2="684.3183"/><!--link CardDetector to CardGenerationExtractor--><path d="M371.413,674.277 C375.992,693.499 380.419,712.089 384.394,728.777 " fill="none" id="CardDetector-CardGenerationExtractor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="385.612,733.893,387.4172,724.211,384.4532,729.0291,379.6351,726.0651,385.612,733.893" style="stroke: #A80036; stroke-width: 1.0;"/><!--link HealthCardControl to CardDetector--><path d="M472.333,248.03 C462.211,264.999 450.947,283.882 439.301,303.407 " fill="none" id="HealthCardControl-CardDetector" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="436.652,307.848,444.6977,302.1676,439.2133,303.5539,437.8271,298.0695,436.652,307.848" style="stroke: #A80036; stroke-width: 1.0;"/><!--link HealthCardControl to TrustedChannelPaceKeyRequestHandler--><path d="M541.011,248.03 C556.64,291.01 576.735,346.271 593.775,393.13 " fill="none" id="HealthCardControl-TrustedChannelPaceKeyRequestHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="595.519,397.928,596.2025,388.1029,593.8103,393.229,588.6841,390.8368,595.519,397.928" style="stroke: #A80036; stroke-width: 1.0;"/><!--link TrustedChannelPaceKeyRequestHandler to de.gematik.ti.healthcard.control.security--><path d="M629,584.376 C629,647.932 629,728.169 629,770.069 " fill="none" id="TrustedChannelPaceKeyRequestHandler-de.gematik.ti.healthcard.control.security" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="629,775.231,633,766.231,629,770.231,625,766.231,629,775.231" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

  package de.gematik.ti.healthcard.control {
      class CardDetector {
          {static} - LOG : Logger
          {static} - TAG : String
          {static} - RECEIVE_BUFFER_SIZE : int
          {static} - instance : CardDetector
          - healthCardMap : Map<ICardReader, IHealthCard>
          - CardDetector()
          {static} + getInstance()
          {static} + startDetection()
          {static} + stopDetection()
          - register()
          - unregister()
          + handleCardPresentEvents()
          - createHealthCardWithTypeAndSendEvent()
          - extractCardType()
          - sendEvent()
          - createPresentEventForHealthCardType()
          - getHealthCardTypeSmcb()
          - getHealthCardTypeHba()
          - getHealthCardTypeForEgk()
          + handleCardAbsentEvents()
          - sendCardAbsentEvent()
          + handleCardReaderDisconnectedEvents()
          - createAbsentEventForHealthCardType()
      }
    }


    package de.gematik.ti.healthcard.control {
      enum CARD_TYPE {
        EGK
        HBA
        SMCB
        UNKNOWN
      }
    }


    package de.gematik.ti.healthcard.control {
      class CardGenerationExtractor {
          {static} + RADIX_16 : int
          {static} + MIN_VERSION_LENGTH : int
          + getCardGeneration()
          + getCardGeneration()
          - convertToInt()
          - check()
      }
    }


    package de.gematik.ti.healthcard.control {
      class HealthCardControl {
          {static} - LOG : Logger
          {static} - TAG : String
          {static} - instance : HealthCardControl
          - HealthCardControl()
          {static} + getInstance()
          {static} + start()
          {static} + stop()
      }
    }


    package de.gematik.ti.healthcard.control {
      class TrustedChannelPaceKeyRequestHandler {
          {static} - LOG : Logger
          {static} - TAG : String
          {static} - instance : TrustedChannelPaceKeyRequestHandler
          - TrustedChannelPaceKeyRequestHandler()
          {static} + getInstance()
          {static} + startHandling()
          {static} + stopHandling()
          - register()
          - unregister()
          + handleRequestPaceKeyEvent()
      }
    }



    package de.gematik.ti.healthcard.control {
        package events {
            package healthcard {
                package absent {
                }
                package present {
                }
            }
        }
    }


    package de.gematik.ti.healthcard.control {
        package security {
        }
    }

        package de.gematik.ti.healthcard.control {
            package c2c {
            }
        }

    package de.gematik.ti.healthcard.control {
            package nfdm {
            }
    }

    package de.gematik.ti.healthcard.control {
                package protocol {
                }
    }

  CardDetector +-down- CARD_TYPE
  CardDetector ..> CardGenerationExtractor
  HealthCardControl ..> CardDetector
  HealthCardControl ..> TrustedChannelPaceKeyRequestHandler
  TrustedChannelPaceKeyRequestHandler ..> de.gematik.ti.healthcard.control.security

@enduml

PlantUML version 1.2019.06(Fri May 24 19:10:25 CEST 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b304.69
Operating System: Windows 7
OS Version: 6.1
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>