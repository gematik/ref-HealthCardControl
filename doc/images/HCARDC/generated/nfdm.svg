<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1243px" preserveAspectRatio="none" style="width:847px;height:1243px;" version="1.1" viewBox="0 0 847 1243" width="847px" zoomAndPan="magnify"><defs><filter height="300%" id="f1wehuxsg3bbu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster de.gematik.ti.healthcard.control--><polygon fill="#FFFFFF" filter="url(#f1wehuxsg3bbu)" points="22,24,251,24,258,47.6094,825,47.6094,825,1231,22,1231,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="258" y1="47.6094" y2="47.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="223" x="26" y="40.5332">de.gematik.ti.healthcard.control</text><!--cluster de.gematik.ti.healthcard.control.nfdm--><polygon fill="#FFFFFF" filter="url(#f1wehuxsg3bbu)" points="46,68,87,68,94,91.6094,801,91.6094,801,1207,46,1207,46,68" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="94" y1="91.6094" y2="91.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="50" y="84.5332">nfdm</text><!--class de.gematik.ti.healthcard.control.nfdm.AccessRightWrapper--><rect fill="#FEFECE" filter="url(#f1wehuxsg3bbu)" height="89.5078" id="de.gematik.ti.healthcard.control.nfdm.AccessRightWrapper" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="637" y="290.5"/><ellipse cx="652" cy="306.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M654,303 Q654.2031,302.5 654.4375,302.25 Q654.6719,302 654.9375,302 Q655.4063,302 655.7031,302.2813 Q656,302.5625 656,303.2188 L656,304.7813 Q656,305.4375 655.7188,305.7188 Q655.4375,306 655,306 Q654.6094,306 654.3594,305.8281 Q654.1094,305.6563 654,305.2031 Q653.9531,304.8906 653.7813,304.7188 Q653.4688,304.3906 652.9063,304.2031 Q652.3438,304 651.7813,304 Q651.0781,304 650.4844,304.2813 Q649.9063,304.5625 649.4531,305.1875 Q649,305.8125 649,306.6719 L649,307.5938 Q649,308.625 649.8438,309.3125 Q650.6875,310 652.1875,310 Q653.0781,310 653.7031,309.7969 Q654.0625,309.6875 654.4688,309.3281 Q654.7344,309.125 654.875,309.0625 Q655.0156,309 655.1875,309 Q655.5156,309 655.75,309.2656 Q656,309.5156 656,309.875 Q656,310.2188 655.6563,310.625 Q655.1563,311.2188 654.3594,311.5469 Q653.3125,312 652.0313,312 Q650.5313,312 649.3281,311.4063 Q648.3594,310.9375 647.6719,309.9219 Q647,308.9063 647,307.7031 L647,306.6094 Q647,305.3594 647.5938,304.2656 Q648.2031,303.1719 649.25,302.5938 Q650.3125,302 651.5,302 Q652.2188,302 652.8438,302.25 Q653.4688,302.5 654,303 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="116" x="666" y="311.4102">AccessRightWrapper</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="638" x2="784" y1="322.5" y2="322.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="645" y="331.918"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="657" y="337.9189">healthCard : IHealthCard</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="638" x2="784" y1="344.3359" y2="344.3359"/><ellipse cx="648" cy="356.7539" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="657" y="359.7549">AccessRightWrapper()</text><ellipse cx="648" cy="370.5898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="657" y="373.5908">getAccessRight()</text><!--class de.gematik.ti.healthcard.control.nfdm.NfdDpeReader--><rect fill="#FEFECE" filter="url(#f1wehuxsg3bbu)" height="546.0938" id="de.gematik.ti.healthcard.control.nfdm.NfdDpeReader" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="115" y="645"/><ellipse cx="159.25" cy="661" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M161.25,657.5 Q161.4531,657 161.6875,656.75 Q161.9219,656.5 162.1875,656.5 Q162.6563,656.5 162.9531,656.7813 Q163.25,657.0625 163.25,657.7188 L163.25,659.2813 Q163.25,659.9375 162.9688,660.2188 Q162.6875,660.5 162.25,660.5 Q161.8594,660.5 161.6094,660.3281 Q161.3594,660.1563 161.25,659.7031 Q161.2031,659.3906 161.0313,659.2188 Q160.7188,658.8906 160.1563,658.7031 Q159.5938,658.5 159.0313,658.5 Q158.3281,658.5 157.7344,658.7813 Q157.1563,659.0625 156.7031,659.6875 Q156.25,660.3125 156.25,661.1719 L156.25,662.0938 Q156.25,663.125 157.0938,663.8125 Q157.9375,664.5 159.4375,664.5 Q160.3281,664.5 160.9531,664.2969 Q161.3125,664.1875 161.7188,663.8281 Q161.9844,663.625 162.125,663.5625 Q162.2656,663.5 162.4375,663.5 Q162.7656,663.5 163,663.7656 Q163.25,664.0156 163.25,664.375 Q163.25,664.7188 162.9063,665.125 Q162.4063,665.7188 161.6094,666.0469 Q160.5625,666.5 159.2813,666.5 Q157.7813,666.5 156.5781,665.9063 Q155.6094,665.4375 154.9219,664.4219 Q154.25,663.4063 154.25,662.2031 L154.25,661.1094 Q154.25,659.8594 154.8438,658.7656 Q155.4531,657.6719 156.5,657.0938 Q157.5625,656.5 158.75,656.5 Q159.4688,656.5 160.0938,656.75 Q160.7188,657 161.25,657.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="179.75" y="665.9102">NfdDpeReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="116" x2="294" y1="677" y2="677"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="686.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="65" x="135" y="692.4189">LOG : Logger</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="700.2539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="51" x="135" y="706.2549">RADIX : int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="714.0898"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="59" x="135" y="720.0908">TAG : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="727.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="135" y="733.9268">cardToRead : IHealthCard</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="741.7617"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="135" y="747.7627">subscriber : Subscriber&lt;byte[]&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="755.5977"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="65" x="135" y="761.5986">LOG : Logger</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="769.4336"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="51" x="135" y="775.4346">RADIX : int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="783.2695"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="59" x="135" y="789.2705">TAG : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="797.1055"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="135" y="803.1064">cardToRead : IHealthCard</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="810.9414"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="135" y="816.9424">subscriber : Subscriber&lt;byte[]&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="116" x2="294" y1="823.3594" y2="823.3594"/><ellipse cx="126" cy="835.7773" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="135" y="838.7783">extractDocument()</text><polygon fill="#4177AF" points="126,845.6133,122,851.6133,130,851.6133" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="135" y="852.6143">NfdDpeReader()</text><polygon fill="#4177AF" points="126,859.4492,122,865.4492,130,865.4492" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="135" y="866.4502">checkConsistency()</text><polygon fill="#4177AF" points="126,873.2852,122,879.2852,130,879.2852" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="135" y="880.2861">checkContainerVersion()</text><polygon fill="#4177AF" points="126,887.1211,122,893.1211,130,893.1211" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="135" y="894.1221">checkSize()</text><polygon fill="#4177AF" points="126,900.957,122,906.957,130,906.957" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="135" y="907.958">readLifeCycleState()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="915.793"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="154" x="135" y="921.7939">convertStringToXMLDocument()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="929.6289"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="92" x="135" y="935.6299">dataInfoToLength()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="943.4648"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="135" y="949.4658">extractEfSize()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="957.3008"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="100" x="135" y="963.3018">getCharSettingFirst()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="971.1367"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="135" y="977.1377">getCompressedData()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="984.9727"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="135" y="990.9736">getSubscriber()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="998.8086"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="96" x="135" y="1004.8096">getUncompressed()</text><ellipse cx="126" cy="1015.6445" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="135" y="1018.6455">extractDocument()</text><polygon fill="#4177AF" points="126,1025.4805,122,1031.4805,130,1031.4805" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="135" y="1032.4814">NfdDpeReader()</text><polygon fill="#4177AF" points="126,1039.3164,122,1045.3164,130,1045.3164" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="135" y="1046.3174">checkConsistency()</text><polygon fill="#4177AF" points="126,1053.1523,122,1059.1523,130,1059.1523" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="135" y="1060.1533">checkContainerVersion()</text><polygon fill="#4177AF" points="126,1066.9883,122,1072.9883,130,1072.9883" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="135" y="1073.9893">checkSize()</text><polygon fill="#4177AF" points="126,1080.8242,122,1086.8242,130,1086.8242" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="135" y="1087.8252">readLifeCycleState()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="1095.6602"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="154" x="135" y="1101.6611">convertStringToXMLDocument()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="1109.4961"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="92" x="135" y="1115.4971">dataInfoToLength()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="1123.332"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="135" y="1129.333">extractEfSize()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="1137.168"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="100" x="135" y="1143.1689">getCharSettingFirst()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="1151.0039"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="135" y="1157.0049">getCompressedData()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="1164.8398"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="135" y="1170.8408">getSubscriber()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="123" y="1178.6758"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="96" x="135" y="1184.6768">getUncompressed()</text><!--class de.gematik.ti.healthcard.control.nfdm.NfdDpeService--><rect fill="#FEFECE" filter="url(#f1wehuxsg3bbu)" height="463.0781" id="de.gematik.ti.healthcard.control.nfdm.NfdDpeService" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="406" y="104"/><ellipse cx="458.75" cy="120" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M460.75,116.5 Q460.9531,116 461.1875,115.75 Q461.4219,115.5 461.6875,115.5 Q462.1563,115.5 462.4531,115.7813 Q462.75,116.0625 462.75,116.7188 L462.75,118.2813 Q462.75,118.9375 462.4688,119.2188 Q462.1875,119.5 461.75,119.5 Q461.3594,119.5 461.1094,119.3281 Q460.8594,119.1563 460.75,118.7031 Q460.7031,118.3906 460.5313,118.2188 Q460.2188,117.8906 459.6563,117.7031 Q459.0938,117.5 458.5313,117.5 Q457.8281,117.5 457.2344,117.7813 Q456.6563,118.0625 456.2031,118.6875 Q455.75,119.3125 455.75,120.1719 L455.75,121.0938 Q455.75,122.125 456.5938,122.8125 Q457.4375,123.5 458.9375,123.5 Q459.8281,123.5 460.4531,123.2969 Q460.8125,123.1875 461.2188,122.8281 Q461.4844,122.625 461.625,122.5625 Q461.7656,122.5 461.9375,122.5 Q462.2656,122.5 462.5,122.7656 Q462.75,123.0156 462.75,123.375 Q462.75,123.7188 462.4063,124.125 Q461.9063,124.7188 461.1094,125.0469 Q460.0625,125.5 458.7813,125.5 Q457.2813,125.5 456.0781,124.9063 Q455.1094,124.4375 454.4219,123.4219 Q453.75,122.4063 453.75,121.2031 L453.75,120.1094 Q453.75,118.8594 454.3438,117.7656 Q454.9531,116.6719 456,116.0938 Q457.0625,115.5 458.25,115.5 Q458.9688,115.5 459.5938,115.75 Q460.2188,116 460.75,116.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="82" x="479.25" y="124.9102">NfdDpeService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="407" x2="601" y1="136" y2="136"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="145.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="65" x="426" y="151.4189">LOG : Logger</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="159.2539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="118" x="426" y="165.2549">NFD_DATATYPE : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="173.0898"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="426" y="179.0908">accessRights : AccessRight[]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="186.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="426" y="192.9268">accessRules : AccessRule[]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="200.7617"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="426" y="206.7627">authorisingCard : IHealthCard</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="214.5977"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="426" y="220.5986">cardToRead : IHealthCard</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="228.4336"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="426" y="234.4346">cardToReadVerifier : CardVerifier</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="242.2695"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="426" y="248.2705">dpeDfAid : ApplicationIdentifier</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="256.1055"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="426" y="262.1064">dpeEfFid : FileIdentifier</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="269.9414"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="426" y="275.9424">dpeEfSfid : ShortFileIdentifier</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="283.7773"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="170" x="426" y="289.7783">dpeStatusEfSfid : ShortFileIdentifier</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="297.6133"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="426" y="303.6143">nfdDfAid : ApplicationIdentifier</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="311.4492"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="426" y="317.4502">nfdEfFid : FileIdentifier</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="325.2852"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="426" y="331.2861">nfdSfid : ShortFileIdentifier</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="339.1211"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="426" y="345.1221">passwordMrNfd : Password</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="352.957"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="426" y="358.958">passwordMrPinDpe : Password</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="366.793"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="426" y="372.7939">pinStateEnum : PinState[]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="380.6289"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="426" y="386.6299">role : ProfessionalRole[]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="394.4648"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="426" y="400.4658">statusNfdSfid : ShortFileIdentifier</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="407" x2="601" y1="406.8828" y2="406.8828"/><ellipse cx="417" cy="419.3008" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="426" y="422.3018">NfdDpeService()</text><ellipse cx="417" cy="433.1367" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="426" y="436.1377">getDpeDocument()</text><ellipse cx="417" cy="446.9727" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="426" y="449.9736">getNfdDocument()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="457.8086"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="426" y="463.8096">checkAccessRights()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="471.6445"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="426" y="477.6455">createProtocolRecord()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="485.4805"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="426" y="491.4814">initFileReference()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="499.3164"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="426" y="505.3174">prepareAuth()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="513.1523"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="426" y="519.1533">prepareGetDocument()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="526.9883"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="426" y="532.9893">validatePinResult()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="540.8242"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="426" y="546.8252">verifyPinByAccessRight()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="414" y="554.6602"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="426" y="560.6611">writeProtocol()</text><!--class de.gematik.ti.healthcard.control.nfdm.NfdDpeServiceSubscriber--><rect fill="#FEFECE" filter="url(#f1wehuxsg3bbu)" height="103.3438" id="de.gematik.ti.healthcard.control.nfdm.NfdDpeServiceSubscriber" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="197" y="284"/><ellipse cx="212" cy="300" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M214,296.5 Q214.2031,296 214.4375,295.75 Q214.6719,295.5 214.9375,295.5 Q215.4063,295.5 215.7031,295.7813 Q216,296.0625 216,296.7188 L216,298.2813 Q216,298.9375 215.7188,299.2188 Q215.4375,299.5 215,299.5 Q214.6094,299.5 214.3594,299.3281 Q214.1094,299.1563 214,298.7031 Q213.9531,298.3906 213.7813,298.2188 Q213.4688,297.8906 212.9063,297.7031 Q212.3438,297.5 211.7813,297.5 Q211.0781,297.5 210.4844,297.7813 Q209.9063,298.0625 209.4531,298.6875 Q209,299.3125 209,300.1719 L209,301.0938 Q209,302.125 209.8438,302.8125 Q210.6875,303.5 212.1875,303.5 Q213.0781,303.5 213.7031,303.2969 Q214.0625,303.1875 214.4688,302.8281 Q214.7344,302.625 214.875,302.5625 Q215.0156,302.5 215.1875,302.5 Q215.5156,302.5 215.75,302.7656 Q216,303.0156 216,303.375 Q216,303.7188 215.6563,304.125 Q215.1563,304.7188 214.3594,305.0469 Q213.3125,305.5 212.0313,305.5 Q210.5313,305.5 209.3281,304.9063 Q208.3594,304.4375 207.6719,303.4219 Q207,302.4063 207,301.2031 L207,300.1094 Q207,298.8594 207.5938,297.7656 Q208.2031,296.6719 209.25,296.0938 Q210.3125,295.5 211.5,295.5 Q212.2188,295.5 212.8438,295.75 Q213.4688,296 214,296.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="226" y="304.9102">NfdDpeServiceSubscriber</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="198" x2="370" y1="316" y2="316"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="205" y="325.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="217" y="331.4189">document : T[]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="198" x2="370" y1="337.8359" y2="337.8359"/><ellipse cx="208" cy="350.2539" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="217" y="353.2549">NfdDpeServiceSubscriber()</text><ellipse cx="208" cy="364.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="217" y="367.0908">onError()</text><ellipse cx="208" cy="377.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="217" y="380.9268">onSuccess()</text><!--class de.gematik.ti.healthcard.control.nfdm.NfdManager--><rect fill="#FEFECE" filter="url(#f1wehuxsg3bbu)" height="75.6719" id="de.gematik.ti.healthcard.control.nfdm.NfdManager" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="62.5" y="297.5"/><ellipse cx="77.5" cy="313.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M79.5,310 Q79.7031,309.5 79.9375,309.25 Q80.1719,309 80.4375,309 Q80.9063,309 81.2031,309.2813 Q81.5,309.5625 81.5,310.2188 L81.5,311.7813 Q81.5,312.4375 81.2188,312.7188 Q80.9375,313 80.5,313 Q80.1094,313 79.8594,312.8281 Q79.6094,312.6563 79.5,312.2031 Q79.4531,311.8906 79.2813,311.7188 Q78.9688,311.3906 78.4063,311.2031 Q77.8438,311 77.2813,311 Q76.5781,311 75.9844,311.2813 Q75.4063,311.5625 74.9531,312.1875 Q74.5,312.8125 74.5,313.6719 L74.5,314.5938 Q74.5,315.625 75.3438,316.3125 Q76.1875,317 77.6875,317 Q78.5781,317 79.2031,316.7969 Q79.5625,316.6875 79.9688,316.3281 Q80.2344,316.125 80.375,316.0625 Q80.5156,316 80.6875,316 Q81.0156,316 81.25,316.2656 Q81.5,316.5156 81.5,316.875 Q81.5,317.2188 81.1563,317.625 Q80.6563,318.2188 79.8594,318.5469 Q78.8125,319 77.5313,319 Q76.0313,319 74.8281,318.4063 Q73.8594,317.9375 73.1719,316.9219 Q72.5,315.9063 72.5,314.7031 L72.5,313.6094 Q72.5,312.3594 73.0938,311.2656 Q73.7031,310.1719 74.75,309.5938 Q75.8125,309 77,309 Q77.7188,309 78.3438,309.25 Q78.9688,309.5 79.5,310 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="91.5" y="318.4102">NfdManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="63.5" x2="160.5" y1="329.5" y2="329.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="63.5" x2="160.5" y1="337.5" y2="337.5"/><ellipse cx="73.5" cy="349.918" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="82.5" y="352.9189">NfdManager()</text><ellipse cx="73.5" cy="363.7539" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="82.5" y="366.7549">getDocument()</text><!--class de.gematik.ti.healthcard.control.nfdm.NfdDpeService.NfdDpeServiceSubscriber--><rect fill="#FEFECE" filter="url(#f1wehuxsg3bbu)" height="48" id="de.gematik.ti.healthcard.control.nfdm.NfdDpeService.NfdDpeServiceSubscriber" style="stroke: #A80036; stroke-width: 1.5;" width="259" x="374.5" y="894"/><ellipse cx="389.5" cy="910" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M391.5,906.5 Q391.7031,906 391.9375,905.75 Q392.1719,905.5 392.4375,905.5 Q392.9063,905.5 393.2031,905.7813 Q393.5,906.0625 393.5,906.7188 L393.5,908.2813 Q393.5,908.9375 393.2188,909.2188 Q392.9375,909.5 392.5,909.5 Q392.1094,909.5 391.8594,909.3281 Q391.6094,909.1563 391.5,908.7031 Q391.4531,908.3906 391.2813,908.2188 Q390.9688,907.8906 390.4063,907.7031 Q389.8438,907.5 389.2813,907.5 Q388.5781,907.5 387.9844,907.7813 Q387.4063,908.0625 386.9531,908.6875 Q386.5,909.3125 386.5,910.1719 L386.5,911.0938 Q386.5,912.125 387.3438,912.8125 Q388.1875,913.5 389.6875,913.5 Q390.5781,913.5 391.2031,913.2969 Q391.5625,913.1875 391.9688,912.8281 Q392.2344,912.625 392.375,912.5625 Q392.5156,912.5 392.6875,912.5 Q393.0156,912.5 393.25,912.7656 Q393.5,913.0156 393.5,913.375 Q393.5,913.7188 393.1563,914.125 Q392.6563,914.7188 391.8594,915.0469 Q390.8125,915.5 389.5313,915.5 Q388.0313,915.5 386.8281,914.9063 Q385.8594,914.4375 385.1719,913.4219 Q384.5,912.4063 384.5,911.2031 L384.5,910.1094 Q384.5,908.8594 385.0938,907.7656 Q385.7031,906.6719 386.75,906.0938 Q387.8125,905.5 389,905.5 Q389.7188,905.5 390.3438,905.75 Q390.9688,906 391.5,906.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="227" x="403.5" y="914.9102">NfdDpeService.NfdDpeServiceSubscriber</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="375.5" x2="632.5" y1="926" y2="926"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="375.5" x2="632.5" y1="934" y2="934"/><!--link de.gematik.ti.healthcard.control.nfdm.NfdDpeService to de.gematik.ti.healthcard.control.nfdm.NfdDpeReader--><path d="M399.936,545.57 C396.256,552.806 392.603,559.967 389,567 C358.798,625.961 325.22,690.204 295.103,747.368 " fill="none" id="de.gematik.ti.healthcard.control.nfdm.NfdDpeService-de.gematik.ti.healthcard.control.nfdm.NfdDpeReader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="405.94,533.74,399.6573,537.2795,400.5081,544.4402,406.7908,540.9007,405.94,533.74" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="370" y="611.4951">nfdDpeReader</text><!--link de.gematik.ti.healthcard.control.nfdm.NfdDpeService to de.gematik.ti.healthcard.control.nfdm.NfdDpeService.NfdDpeServiceSubscriber--><path d="M504,582.225 C504,706.098 504,841.054 504,893.932 " fill="none" id="de.gematik.ti.healthcard.control.nfdm.NfdDpeService-de.gematik.ti.healthcard.control.nfdm.NfdDpeService.NfdDpeServiceSubscriber" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="504" cy="575.18" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="504" x2="504" y1="583.18" y2="567.18"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="496" x2="512" y1="575.18" y2="575.18"/><!--link de.gematik.ti.healthcard.control.nfdm.NfdManager to de.gematik.ti.healthcard.control.nfdm.NfdDpeReader--><path d="M120.018,386.548 C129.378,444.972 145.594,546.193 161.369,644.656 " fill="none" id="de.gematik.ti.healthcard.control.nfdm.NfdManager-de.gematik.ti.healthcard.control.nfdm.NfdDpeReader" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="117.959,373.696,114.9589,380.2534,119.858,385.5448,122.8581,378.9874,117.959,373.696" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="157" y="611.4951">nfdDpeReader</text><!--
@startuml



  namespace de.gematik.ti.healthcard.control {
    namespace nfdm {
      class AccessRightWrapper {
          - healthCard : IHealthCard
          + AccessRightWrapper()
          + getAccessRight()
      }

      class NfdDpeReader {
                {static} - LOG : Logger
                {static} - RADIX : int
                {static} - TAG : String
                - cardToRead : IHealthCard
                - subscriber : Subscriber<byte[]>
                + extractDocument()
                ~ NfdDpeReader()
                ~ checkConsistency()
                ~ checkContainerVersion()
                ~ checkSize()
                ~ readLifeCycleState()
                {static} - convertStringToXMLDocument()
                {static} - dataInfoToLength()
                - extractEfSize()
                {static} - getCharSettingFirst()
                - getCompressedData()
                - getSubscriber()
                {static} - getUncompressed()
       }

       class NfdDpeReader {
                 {static} - LOG : Logger
                 {static} - RADIX : int
                 {static} - TAG : String
                 - cardToRead : IHealthCard
                 - subscriber : Subscriber<byte[]>
                 + extractDocument()
                 ~ NfdDpeReader()
                 ~ checkConsistency()
                 ~ checkContainerVersion()
                 ~ checkSize()
                 ~ readLifeCycleState()
                 {static} - convertStringToXMLDocument()
                 {static} - dataInfoToLength()
                 - extractEfSize()
                 {static} - getCharSettingFirst()
                 - getCompressedData()
                 - getSubscriber()
                 {static} - getUncompressed()
       }

       class NfdDpeService {
                 {static} - LOG : Logger
                 {static} - NFD_DATATYPE : String
                 - accessRights : AccessRight[]
                 - accessRules : AccessRule[]
                 - authorisingCard : IHealthCard
                 - cardToRead : IHealthCard
                 - cardToReadVerifier : CardVerifier
                 - dpeDfAid : ApplicationIdentifier
                 - dpeEfFid : FileIdentifier
                 - dpeEfSfid : ShortFileIdentifier
                 - dpeStatusEfSfid : ShortFileIdentifier
                 - nfdDfAid : ApplicationIdentifier
                 - nfdEfFid : FileIdentifier
                 - nfdSfid : ShortFileIdentifier
                 - passwordMrNfd : Password
                 - passwordMrPinDpe : Password
                 - pinStateEnum : PinState[]
                 - role : ProfessionalRole[]
                 - statusNfdSfid : ShortFileIdentifier
                 + NfdDpeService()
                 + getDpeDocument()
                 + getNfdDocument()
                 - checkAccessRights()
                 - createProtocolRecord()
                 - initFileReference()
                 - prepareAuth()
                 - prepareGetDocument()
                 - validatePinResult()
                 - verifyPinByAccessRight()
                 - writeProtocol()
       }

       class NfdDpeServiceSubscriber {
                 - document : T[]
                 + NfdDpeServiceSubscriber()
                 + onError()
                 + onSuccess()
       }

       class de.gematik.ti.healthcard.control.nfdm.NfdManager {
                 + NfdManager()
                 + getDocument()
       }
    }
  }


  de.gematik.ti.healthcard.control.nfdm.NfdDpeService o- - de.gematik.ti.healthcard.control.nfdm.NfdDpeReader : nfdDpeReader
  de.gematik.ti.healthcard.control.nfdm.NfdDpeService +-down- de.gematik.ti.healthcard.control.nfdm.NfdDpeService.NfdDpeServiceSubscriber
  de.gematik.ti.healthcard.control.nfdm.NfdManager o- - de.gematik.ti.healthcard.control.nfdm.NfdDpeReader : nfdDpeReader

@enduml

PlantUML version 1.2019.06(Fri May 24 19:10:25 CEST 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b304.69
Operating System: Windows 7
OS Version: 6.1
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>